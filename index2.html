<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Processamento de Imagens</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/menu.css" />
    <link rel="stylesheet" href="css/modal.css" />
    <link rel="stylesheet" href="css/input.css" />
    <script src="script/menu.js"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
  </head>
  <body>
    <nav>
      <ul class="menu">
        <li onclick="openSubmenu('file')">
          <i class="ph ph-file"> </i>
          <div class="submenu" id="file">
            <ul>
              <li>
                <button>
                  <label for="upload">Upload</label
                  ><input id="upload" type="file" onchange="upload(event)" />
                </button>
              </li>
              <li><button>Donwload</button></li>
            </ul>
          </div>
        </li>

        <li onclick="openSubmenu('transformations')">
          <i class="ph ph-selection-foreground"> </i>
          <div class="submenu" id="transformations">
            <ul>
              <li><button onclick="undo()">Undo</button></li>
              <li><button onclick="rgb2gray()">Grayscale</button></li>
              <li>
                <button onclick="rgb2grayWeighted()">
                  To grayscale (Weighted)
                </button>
              </li>
              <li><button onclick="toNegative()">To negative</button></li>
              <li>
                <button onclick="logTransformation()">
                  Logarithmic transform
                </button>
              </li>
              <li><button onclick="openModal('piecewiseModal')">Piecewise Linear</button></li>
              <li>
                <button onclick="histEqualize()">Histogram Equalize</button>
              </li>

              <li>
                <div id="gammabox">
                  <label for="gamma">Gamma Transformation</label
                  ><input
                    id="gamma"
                    type="number"
                    min="0"
                    onchange="gammaTransformation(event.target.value)"
                    step=".25"
                  />
                </div>
              </li>
              <li>
                <div id="thresholding">
                  <label for="thresholding">Thresholding</label
                  ><input
                    id="thresholding"
                    type="number"
                    min="0"
                    onchange="thresholding(event.target.value)"
                    step="1.0"
                  />
                </div>
              </li>

              <li><button onclick="sepia()">Sepia</button></li>
              <li>
                <button>
                  <label for="chromakey">Chroma Key</label
                  ><input
                    id="chromakey"
                    type="file"
                    onchange="uploadChromaKey(event)"
                  />
                  <input id="distCK" type="number" min="0" step="1.0" />
                </button>
              </li>
            </ul>
          </div>
        </li>

        <li onclick="openSubmenu('convolutions')">
          <i class="ph ph-corners-out"></i>
          <div class="submenu" id="convolutions">
            <ul>              
              <li>
              <button onclick="callConvolution(0)">
                Convolution Mean
                <input id="conv" type="number" min="3" max="9" step="2.0" value="3"/>
              </button>
            </li>
              <li>
                <button onclick="callConvolution(1)">
                  Convolution Median
                  <input id="conv" type="number" min="3" max="9" step="2.0" value="3" />
                </button>
              </li>
              <li>
                <button onclick="callConvolution(2)">
                  Convolution Gauss
                  <input id="conv" type="number" min="3" max="9" step="2.0" value="3"/>
                </button>
              </li>
              <li>
                <button onclick="callConvolution(3)">
                  Convolution Laplace
                  <input id="conv" type="number" min="3" max="9" step="2.0" value="3"/>
                </button>
              </li>
              <li>
                <button onclick="callConvolution(4)">
                  Sharpening Laplace
                  <input id="conv" type="number" min="3" max="9" step="2.0" value="3"/>
                </button>
              </li>
              <li>
                <button onclick="callConvolution(5)">
                  High-boost
                  <input id="conv" type="number" min="3" max="9" step="2.0" value="3"/>
                </button>
              </li>
              <li>
                <button onclick="callConvolution(6)">
                  Sobel X
                  <input id="conv" type="number" min="3" max="9" step="2.0" value="3"/>
                </button>
              </li>

              <li>
                <button onclick="callConvolution(7)">
                  Sobel Y
                  <input id="conv" type="number" min="3" max="9" step="2.0" value="3"/>
                </button>
              </li>

              <li>
                <button onclick="callConvolution(8)">
                  Border detection gradient
                  <input id="conv" type="number" min="3" max="9" step="2.0" value="3"/>
                </button>
              </li>
              <li><button onclick="openModal('kernelModal')">Convolution Generic Kernel</button></li>
            </ul>
          </div>
        </li>

        <li onclick="openSubmenu('steganography')">
          <i class="ph ph-qr-code"></i>
          <div class="submenu" id="steganography">
            <ul>
              <li>
                <button onclick="openModal('steganographyModal')">
                  Encrypt
                </button>
              </li>
              <li><button onclick="decrypt()">Decrypt</button></li>
            </ul>
          </div>
        </li>

        <li onclick="openSubmenu('colors')">
          <i class="ph ph-palette"></i>
          <div class="submenu" id="colors">
            <ul>
              <li>
                <button onclick="openModal('rgbToHSVModal')">RGB<->HSV</button>
              </li>
              <li>
                <button onclick="openModal('adjustHSLModal')">
                  Adjust HSL 
                </button>
              </li>
            </ul>
          </div>
        </li>
      </ul>
    </nav>

    <main>
      <section><canvas id="image"></canvas></section>
    </main>

    <div class="modal" id="steganographyModal">
      <div class="content">
        <h2>Steganography encrypt</h2>
        <textarea
          id="steganographyMessage"
          placeholder="Digite uma mensagem:"
          rows="8"
        ></textarea>
        <div class="buttons">
          <button onclick="closeModal()">Cancel</button>
          <button onclick="encrypt()">Encrypt</button>
        </div>
      </div>
    </div>


    <!-- -->
    <div class="modal" id="piecewiseModal">
      <div class="content">
        <h2>Piecewise Linear</h2>
        <!-- grafico da piecewise aqui -->
        <textarea></textarea>
        <div class="buttons">
          <button onclick="closeModal()">Cancel</button>
        </div>
      </div>
    </div>

    <div class="modal" id="kernelModal">
      <div class="content">
        <h2>Apply generic kernel</h2>
        <textarea
          id="genericKernelArray"
          placeholder="Digite o kernel:"
          rows="5"
        >[0,0,0,
 0,0,0,
 0,0,0] </textarea>
        <div class="buttons">
          <button onclick="closeModal()">Cancel</button>
          <button onclick="genericKernel()">Apply</button>
        </div>
      </div>
    </div>


    <div class="modal" id="steganographyModalDecrypt">
      <div class="content">
        <h2>Decrypted message</h2>
        <p id="steganographyDecrypt"></p>
        <div class="buttons">
          <button onclick="closeModal()">Cancel</button>
        </div>
      </div>
    </div>

    <div class="modal" id="rgbToHSVModal">
      <div class="content">
        <h2>RGB<->HSV</h2>

        <button onclick="rgbToHSV('220','32','255')">RGB TO HSV</button>
        <button onclick="hsvToRGB('300','100','100')">RGB TO HSV</button>
        <div class="buttons">
          <button onclick="closeModal()">Cancel</button>
        </div>
      </div>
    </div>

    <div class="modal" id="adjustHSLModal">
      <div class="content">
        <h2>Adjust hue, saturation and brightness</h2>
        <div><label for="hueAdjust" font-color = >HUE</label><input type="range" id="hueAdjust" name="hueAdjust" min="0" max="360" value="0" onchange="adjustImageHSL()"/></div>
        <div><label for="saturationAdjust" font-color = >SATURATION</label><input type="range" id="saturationAdjust" name="saturationAdjust" min="0.0" max="1.0" value="0" onchange="adjustImageHSL()" step="0.05"/></div>
        <div><label for="lightnessAdjust" font-color = >LIGHTNESS</label><input type="range" id="lightnessAdjust" name="lightnessAdjust" min="0.0" max="1.0" value="0" onchange="adjustImageHSL()" step="0.05"/></div>
        <!-- <button onclick="rgbToHSL('64','0','128')">RGB TO HSL</button>
        <button onclick="hslToRGB('0','0','0.75')">HSL TO RGB</button> -->
        <div class="buttons">
          <button onclick="closeModal()">Cancel</button>
        </div>
      </div>
    </div>

    <script src="script/chromakey.js"></script>
    <script src="script/convolutions.js"></script>
    <script src="script/transformations.js"></script>
    <script src="script/colors.js"></script>
    <script src="script/steganography.js"></script>
    <script src="script/upload.js"></script>
    <script src="script/modal.js"></script>
  </body>
</html>
